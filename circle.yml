machine:
  services:
    # we want to test on the same database as production
    #- mysql # We are using sqlite in memory right now
    - docker
  environment:
    # created this api at: https://circleci.com/gh/vikingco/mvne-platform/edit#api using type "all"
    derp: herp
    GOPATH: /home/ubuntu/go
    GOBIN: /home/ubuntu/go/bin
    PATH: "$GOBIN:$PATH"

dependencies:
  cache_directories:
    - /home/ubuntu/build_cache2
  pre:
    - mkdir -p /home/ubuntu/build_cache2
  override:
    - ls -l /home/ubuntu/build_cache | wc -l 
    - ls -l /home/ubuntu/build_cache2 | wc -l 
    - seq 10 | xargs -I{} -P1 -n1 mktemp -p /home/ubuntu/build_cache2/.
    - ls -l /home/ubuntu/build_cache | wc -l 
    - ls -l /home/ubuntu/build_cache2 | wc -l 

  post:
    - echo 'done'

test:
  override:
    - echo 'override test'
  post:
    - echo 'post test'

deployment:
  default:
    branch: /.*/
    commands:
      - echo 'deploy'
